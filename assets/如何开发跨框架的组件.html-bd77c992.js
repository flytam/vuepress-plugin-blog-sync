import{_ as a,z as d,A as r,Y as e,C as i,U as s,a6 as l,Q as t}from"./framework-cb9358d9.js";const o={},m=e("p",null,[e("img",{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/7/24/1737e6038b00329e~tplv-t2oaga2asx-image.image",alt:""})],-1),v={href:"https://www.zoo.team/article/cross-framework-component",target:"_blank",rel:"noopener noreferrer"},c=l(`<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/7/19/17365d77ad4e9ba1~tplv-t2oaga2asx-image.image" alt=""></p><h2 id="èƒŒæ™¯" tabindex="-1"><a class="header-anchor" href="#èƒŒæ™¯" aria-hidden="true">#</a> èƒŒæ™¯</h2><p>ç¬”è€…æ‰€åœ¨çš„ä¸šåŠ¡ä¸­å°å›¢é˜Ÿï¼Œéœ€è¦æä¾›ä¸šåŠ¡ç»„ä»¶ç»™ä¸åŒçš„ä¸Šå±‚ä¸šåŠ¡æ–¹ä½¿ç”¨ï¼Œä½†å› ä¸ºä¸€äº›å†å²é—ç•™é—®é¢˜ï¼Œä¸åŒä¸šåŠ¡çº¿ä½¿ç”¨çš„æ¡†æ¶ä¸ç»Ÿä¸€ï¼ŒåŒ…æ‹¬ jQueryã€React ã€Vue ã€‚ä¸ºäº†æ»¡è¶³ä¸åŒä¸šåŠ¡æ–¹çš„éœ€æ±‚ï¼Œå¾€å¾€éœ€è¦æ ¹æ®ä¸šåŠ¡æ–¹ä½¿ç”¨çš„æ¡†æ¶ï¼Œå¼€å‘å¯¹åº”æ¡†æ¶çš„ç»„ä»¶ã€‚</p><p>è¿™æ ·åšå°±ä¼šäº§ç”Ÿä¸€äº›<strong>ç—›ç‚¹</strong>ï¼š</p><ul><li><p>æ¯ç§é€‰å‹éƒ½éœ€è¦å¼€å‘ä¸€æ¬¡ï¼Œè´¹æ—¶åŠ³åŠ›</p></li><li><p>ç»„ä»¶å‡çº§ï¼Œéœ€è¦ä¸šåŠ¡æ–¹åŒæ­¥å‘ç‰ˆå‡çº§ï¼Œæ²Ÿé€šæˆæœ¬é«˜ã€è¿­ä»£æ•ˆç‡ä½</p></li></ul><h2 id="ç†æƒ³ä¸­çš„ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ç†æƒ³ä¸­çš„ç»„ä»¶" aria-hidden="true">#</a> ç†æƒ³ä¸­çš„ç»„ä»¶</h2><ul><li>è·¨æ¡†æ¶ï¼š<strong>Write once, run everywhere</strong></li><li>å°‘å‡çº§ï¼šç»„ä»¶å‡çº§ï¼Œä¸šåŠ¡æ–¹å°‘å‡çº§ä¸å‡çº§ï¼ˆæ³¨æ„ï¼šç»„ä»¶å‡çº§åä¸šåŠ¡çº¿å›å½’è¿˜æ˜¯å¿…è¦çš„ï¼‰</li></ul><h2 id="å®ç°æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#å®ç°æ–¹æ¡ˆ" aria-hidden="true">#</a> å®ç°æ–¹æ¡ˆ</h2><p>å¦‚ä½•è®¾è®¡ä¸€ä¸ªç¬¦åˆä¸Šé¢æåˆ°çš„è·¨æ¡†æ¶ã€å°‘å‡çº§æœŸæœ›çš„é€šç”¨æ–¹æ¡ˆå‘¢ï¼Ÿ</p><p>å¾ˆå®¹æ˜“æƒ³åˆ°ç”¨åŸç”Ÿ JS æ¥å®ç°ï¼Œé¿å…è·¨æ¡†æ¶çš„é—®é¢˜ã€‚</p><h4 id="åŸç”Ÿå®ç°" tabindex="-1"><a class="header-anchor" href="#åŸç”Ÿå®ç°" aria-hidden="true">#</a> åŸç”Ÿå®ç°</h4><p>ç”¨åŸç”Ÿ JS å®ç°ï¼ŒåŒ…å«é¡µé¢é‡Œç”¨åˆ°çš„ UI ç»„ä»¶ï¼Œä¸ä¾èµ–ä»»ä½•æ¡†æ¶ã€‚</p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>è·¨æ¡†æ¶ï¼šä¸ä¾èµ–äºæ¡†æ¶å®ç°</li><li>è½»é‡ï¼šå¯ä»¥ä¸ä¾èµ–å…¶ä»– UI ç»„ä»¶ï¼Œä½“ç§¯è¾ƒå°</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>æŠ•å…¥äº§å‡ºæ¯”ä½ï¼šå®ç°ä¸€å¥—å¸¸ç”¨å·¥å…·æ–¹æ³•å’Œ UI ç»„ä»¶ï¼ŒæŠ•å…¥æ—¶é—´é•¿</li><li>è¸©å‘ï¼šå…¼å®¹æ€§é—®é¢˜çš„å‘è¦èµ°ä¸€éï¼Œé£é™©å¤§</li><li>å¾ˆéš¾æ»¡è¶³å¤æ‚ä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚</li></ul><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p><p>ä¸éœ€è¦å¤æ‚äº¤äº’çš„åœºæ™¯ï¼Œå¦‚å‰å°åŠé¡¶ã€åå°èœå•ä¾§è¾¹æ å¯é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚</p><p>ä½†åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä¸šåŠ¡ç»„ä»¶ä¸­æœ‰æ¯”è¾ƒå¤šå¤æ‚çš„äº¤äº’åœºæ™¯ï¼Œ ä¸Šé¢çš„æ–¹æ¡ˆä¸å¤ªèƒ½æ»¡è¶³è¦æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¸Šé¢çš„æ–¹æ¡ˆä¹‹ä¸Šè¿›è¡Œè¿­ä»£ï¼š</p><h4 id="åŸç”Ÿå®¹å™¨ç»„ä»¶-iframe-åŠ è½½ä¸šåŠ¡é€»è¾‘ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#åŸç”Ÿå®¹å™¨ç»„ä»¶-iframe-åŠ è½½ä¸šåŠ¡é€»è¾‘ç»„ä»¶" aria-hidden="true">#</a> åŸç”Ÿå®¹å™¨ç»„ä»¶ + iframe åŠ è½½ä¸šåŠ¡é€»è¾‘ç»„ä»¶</h4><p>æˆ‘ä»¬å°†ä¸šåŠ¡ç»„ä»¶æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><p><strong>ä¸€ã€å®¹å™¨ç»„ä»¶</strong>ï¼š</p><p>ç”¨åŸç”Ÿ JS å®ç°ä¸­é—´å±‚å®¹å™¨ç»„ä»¶ï¼Œè§£å†³è·¨æ¡†æ¶çš„åŠ è½½é—®é¢˜ï¼Œå®¹å™¨ç»„ä»¶ä¸»è¦è´Ÿè´£ï¼š</p><ul><li>æ”¶é›†ç»„ä»¶éœ€è¦çš„å‚æ•°</li><li>æ³¨å†Œå…¨å±€å›è°ƒ</li><li>ç»„ä»¶æŒ‚è½½</li><li>åŠ è½½ iframe</li></ul><p><strong>äºŒã€ä¸šåŠ¡é€»è¾‘ç»„ä»¶</strong></p><p>æ ¹æ® iframe å¤©ç„¶çš„æ²™ç®±ç‰¹æ€§ï¼Œä¸šåŠ¡é€»è¾‘ç”¨ iframe é¡µé¢åŠ è½½ï¼Œå°±ä¿è¯äº†ä¸šåŠ¡ç»„ä»¶çš„å®ç°ä¸å—æ¡†æ¶çš„é™åˆ¶ï¼Œå¯ä»¥å®Œç¾è§£å†³é—®é¢˜ã€‚ä¸šåŠ¡é€»è¾‘ç»„ä»¶ä¸»è¦è´Ÿè´£ï¼š</p><ul><li>ä¸å®¹å™¨ç»„ä»¶é€šä¿¡</li><li>è¿è¡Œç¯å¢ƒéš”ç¦»ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„æ¡†æ¶å®ç°ä¸šåŠ¡é€»è¾‘</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>åŠ¨æ€åŠ è½½é™æ€èµ„æºï¼Œiframe åŠ è½½ç•¥æ…¢ï¼Œå®é™…ä½“éªŒåœ¨æ¥å—èŒƒå›´å†…</li><li>è·¨åŸŸé€šä¿¡é—®é¢˜</li></ul><p>æ­¤æ–¹æ¡ˆå®¹å™¨ç»„ä»¶ä½œä¸ºä¸­é—´å±‚ï¼Œå°è£…ä¸å˜çš„é€»è¾‘ï¼Œå°†å¤šå˜çš„ä¸šåŠ¡é€»è¾‘éš”ç¦»å‡ºæ¥ï¼Œä»è€Œä¿è¯åä½œæ–¹å°½é‡å°‘å‡çº§æˆ–ä¸å‡çº§ã€‚ä¸šåŠ¡å®šåˆ¶æ€§å¯æ ¹æ®æ¥å£é…ç½®ï¼Œè¿”å›ä¸åŒçš„ iframe åœ°å€ï¼ŒåŠ è½½ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ç»„ä»¶ï¼Œä¸€æ¬¡å¼€å‘ä»»æ„ä½¿ç”¨ã€‚</p><h2 id="å¦‚ä½•å®ç°" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®ç°" aria-hidden="true">#</a> å¦‚ä½•å®ç°</h2><p><strong>ä¸‹é¢æ˜¯æ•´ä¸ªç»„ä»¶çš„é€»è¾‘å›¾</strong>ï¼š</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/7/19/17365d5809533e4e~tplv-t2oaga2asx-image.image" alt="å›¾ç‰‡"></p><p>ä½¿ç”¨æ–¹é€šè¿‡å®¹å™¨ç»„ä»¶åˆå§‹åŒ–å‚æ•°ã€å¹¶æ³¨å†Œç›¸åº”çš„å›è°ƒï¼š</p><p><strong>å®¹å™¨ç»„ä»¶</strong></p><ul><li><strong>åˆå§‹åŒ–</strong>ï¼š</li><li>è®¾ç½® document.domainï¼Œè®©å¤–éƒ¨ç»„ä»¶å’Œ iframe å¯ä»¥é€šä¿¡</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// è·å–ä¸»åŸŸå
function getTopLevelDomain(host) {
    let data = host || window.location.host;
    return data.split(&amp;#39;.&amp;#39;).slice(-2).join(&amp;#39;.&amp;#39;);
}
// è®¾ç½®ä¸»åŸŸå
function setDomainToTopLevelDomain() {
  try {
    window.document.domain = getTopLevelDomain();
  } catch (error) {
    console.error(&amp;quot;è®¾ç½®domainå¤±è´¥&amp;quot;)
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>renderï¼š</strong></li><li>ç”Ÿæˆå¤–éƒ¨å®¹å™¨ div ï¼Œè®¾ç½® loading å›¾ï¼ŒæŒ‚è½½ç»„ä»¶</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>class Vanilla {
  // è·å–é…ç½®ä¿¡æ¯
  constructor(config) {
    const options = { ...defaultConfig, ...config };
    this.options = options; 
    this.elCls = options.elCls;
  }
	// ç”Ÿæˆå®¹å™¨ div
  render() {
    const div = document.createElement(&amp;#39;div&amp;#39;);
    this.el = div;
    
    const { width, height } = this.options;
    div.className = \`\${prefixCls}-wrap \${prefixCls}-wrap-loading \${this.elCls || &amp;#39;&amp;#39;}\`;
    const maskNode = getMaskNode(prefixCls);
    const iframeNode = getIframeNode(prefixCls, width, height);
    div.innerHTML = maskNode + iframeNode;
    document.body.appendChild(div);
    this.fn();
  }
  init() {
    // è®¾ç½®ä¸»åŸŸå
    setDomainToTopLevelDomain();
    // åˆå§‹åŒ– div
    this.render();
    // åˆå§‹åŒ–å…¨å±€å›è°ƒå‡½æ•°
    this.initCallbacks();
  }
  ...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>æ³¨å†Œå›è°ƒå‡½æ•°</strong></li><li>é€šè¿‡æ³¨å†Œå…¨å±€å›è°ƒå‡½æ•°ï¼Œç”¨äºä¸šåŠ¡é€»è¾‘ç»„ä»¶ä¸å®¹å™¨ç»„ä»¶è¿›è¡Œé€šä¿¡</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>class Vanilla {
 ... 
  initCallbacks() {
    const self = this;
    const options = this.options;
     // åˆå§‹åŒ–å…¨å±€å˜é‡
    window[paramsName] = options;
    
    window.onSuccess = function onSuccess(data, res) {
      options.onSuccess &amp;amp;&amp;amp; options.onSuccess(data, res);
      // å»¶è¿Ÿ1500msåˆ é™¤ç”¨æ¥æ˜¾ç¤ºæˆåŠŸæç¤º
      setTimeout(() =&amp;gt; {
        self.removeNode();
      }, 1500);
      self.resetCallbacks &amp;amp;&amp;amp; self.resetCallbacks();
    };
    window.onCancel = function onCancel() {
      options.onCancel &amp;amp;&amp;amp; options.onCancel();
      self.removeNode();
      self.resetCallbacks &amp;amp;&amp;amp; self.resetCallbacks();
    };
    window.onError = function onError(data) {
      options.onError &amp;amp;&amp;amp; options.onError(data);
    };
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>åŠ è½½ iframe é¡µé¢ï¼š</strong></li><li>é€šè¿‡æ¥å£è·å– iframe åœ°å€ï¼Œä¸šåŠ¡æ–¹å¯ä»¥æ ¹æ®é…ç½®åŠ¨æ€ï¼ŒåŠ è½½ä¸åŒçš„ä¸šåŠ¡ç»„ä»¶</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>let timer = function timer() {};
class Vanilla {
  ...
  $mount() {
   ...
   this.fn();
  }
  fn() {
    const {
      width,
      height,
      isAutoSize,
    } = this.options;
    const el = this.el;
    const url = getContentUrl(&amp;#39;ä½ çš„iframeåœ°å€&amp;#39;);
    const iframeWidth = width;
    const iframeHeight = height;
    const iframeEle = el.querySelector(&amp;#39;.J_CreditIframe&amp;#39;);
    const modalNode = el.querySelector(\`.\${prefixCls}\`);

    if (!isAutoSize &amp;amp;&amp;amp; (iframeWidth !== width || iframeHeight !== height)) {
      this.setNodeSizeAndPostion(modalNode, iframeEle, iframeWidth, iframeHeight);
    }
    iframeEle.setAttribute(&amp;#39;src&amp;#39;, url);
    // ç›‘å¬loadåï¼Œéšè—loading
    addEvent(iframeEle, &amp;#39;load&amp;#39;, () =&amp;gt; {
      el.className = \`\${prefixCls}-wrap \${this.elCls || &amp;#39;&amp;#39;}\`;
      const maxTime = 3000;
      const duration = 1000;
      let timerCounter = 0;
      let w = defaultConfig.width;
      let h = defaultConfig.height;
      // è‡ªé€‚åº”å®½é«˜
      if (isAutoSize) {
        timer = setInterval(() =&amp;gt; {
          ...
      //
       this.setNodeSizeAndPostion(modalNode, iframeEle, scrollWidth, scrollHeight);
          }
          timerCounter += duration;
          if (timerCounter &amp;gt;= maxTime) {
            clearInterval(timer);
          }
        }, duration);
      }
    });
  }
  
  // è®¾ç½®iframeå®½é«˜
  setNodeSizeAndPostion(container, iframe, width, height) {
    container.style.cssText = \`width: \${width}px; height: \${height}px;margin-left: -\${width / 2}px;margin-top: -\${height / 2}px;\`;
    iframe.style.cssText = \`width: \${width}px; height: \${height}px;\`;
  }
  // åˆ é™¤DOM
  removeNode() {
    timer &amp;amp;&amp;amp; clearInterval(timer);
    if (this.el) {
      document.body.removeChild(this.el);
    }
  }
  ...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æˆ‘ä»¬å®Œæˆäº†æ•´ä¸ªä¸šåŠ¡ç»„ä»¶çš„åŠ è½½è¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦å¤„ç†çš„å°±æ˜¯ä¸šåŠ¡é€»è¾‘ç»„ä»¶å¦‚ä½•ä¸å®¹å™¨ç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼š</p><p>é€šå¸¸æˆ‘ä»¬å¯ä»¥è¿™æ ·å¤„ç†ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// è·å–çˆ¶é¡µé¢å±æ€§
const params = window.parent.paramsName;
// è°ƒç”¨çˆ¶é¡µé¢æ–¹æ³•
window.parent.onSuccess &amp;amp;&amp;amp; window.parent.onSuccess(data);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé¢ä¸´çš„é—®é¢˜æ˜¯ä¸šåŠ¡æ–¹çš„åŸŸåä¸ iframe åŠ è½½çš„ç»„ä»¶åœ°å€åŸŸåä¸ä¸€è‡´ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¿…é¡»è¦è§£å†³ç»„ä»¶çš„è·¨åŸŸé€šä¿¡é—®é¢˜äº†.</p><p><strong>è·¨åŸŸçš„é€šä¿¡é—®é¢˜</strong></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼å»è§£å†³ï¼š</p><p><strong>postMessage</strong></p>`,50),u={href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage",target:"_blank",rel:"noopener noreferrer"},p=l(`<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/7/19/17365d5805ebaaf8~tplv-t2oaga2asx-image.image" alt="å›¾ç‰‡"></p><p><strong>ä¸»åŸŸåä¿®æ”¹</strong></p><ul><li>document.domain + iframe : è®¾ç½® document.domain ä¸ºä¸»åŸŸåï¼Œä¸šåŠ¡æ–¹ä¸ iframe ä¸»åŸŸåç›¸åŒï¼Œå®ç°çˆ¶å­åŒåŸŸé€šä¿¡ã€‚è¿™ç§å®ç°çš„å‰ææ˜¯ä¸¤ä¸ªåŸŸçš„ä¸»åŸŸåå¿…é¡»ä¸€è‡´</li></ul><p><strong>Nginx ä»£ç†</strong></p><ul><li>Nginx é…ç½®ï¼šiframe é¡µé¢çš„è·¯å¾„é…ç½®ä¸ºé€šç”¨è·¯å¾„ï¼Œåå‘ä»£ç†ä¾èµ–æ¥å£ï¼Œå®ç°å…¨åŸŸåå¯è®¿é—®ã€‚å°†ä¸šåŠ¡é€»è¾‘ç»„ä»¶æ•´åˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ï¼Œç»„ä»¶æ‰“åŒ…å’Œå‘å¸ƒé€»è¾‘å¯å•ç‹¬å®šåˆ¶ï¼Œé€‚åˆå¤§é‡è·¨æ¡†æ¶ç»„ä»¶</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// é™æ€é¡µé¢åœ°å€
location ~ ^/your-project/ {
  root /opt/front/your-project/;
  try_files $uri $uri/ /index.html = 404;
  access_log off;
}
// åå‘ä»£ç†
location ~ ^/api/service/(.*)$ {
   proxy_pass http://your-ip;
   proxy_set_header        X-Real-IP $remote_addr;
   proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
   proxy_set_header        Host $http_host;
   proxy_set_header        requestId $request_id;
   proxy_http_version      1.1;
   proxy_set_header        Connection &amp;quot;&amp;quot;;
   expires 30d;
   access_log off;
 }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="éœ€è¦æ³¨æ„çš„ç‚¹" tabindex="-1"><a class="header-anchor" href="#éœ€è¦æ³¨æ„çš„ç‚¹" aria-hidden="true">#</a> éœ€è¦æ³¨æ„çš„ç‚¹</h2><ul><li><p>æ³¨æ„å¤„ç†éç™½è‰²èƒŒæ™¯çš„åœ†è§’éƒ¨åˆ†ï¼Œå®¹æ˜“å‡ºç°æ¯›è¾¹ã€‚å¤„ç†æ–¹æ³•æ˜¯ iframe å®¹å™¨ä¸è®¾ç½®èƒŒæ™¯è‰²ï¼Œç”± iframe é‡Œé¢è®¾ç½®åœ†è§’</p></li><li><p>ç‰ˆæœ¬æ§åˆ¶ï¼šå°ç‰ˆæœ¬ä¿è¯å‘å‰å…¼å®¹ï¼Œå¤§ç‰ˆæœ¬å¯é€šè¿‡åŠ¨æ€è·å– iframe åœ°å€æ¥å®ç°ç‰ˆæœ¬æ§åˆ¶</p></li></ul><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>å¤šæ¡†æ¶èƒŒæ™¯ä¸‹çš„ç»„ä»¶é‡å¤å¼€å‘é—®é¢˜ï¼Œæ ¹æºè¿˜æ˜¯å¤šæ¡†æ¶çš„å†å²å€ºåŠ¡é—®é¢˜ã€‚æ›´å¥½çš„æ–¹å¼åˆ™æ˜¯æ¨åŠ¨æŠ€æœ¯æ ˆçš„ç»Ÿä¸€ï¼Œä»æ ¹æºä¸Šé¿å…å‡ºç°æ­¤ç§æƒ…å†µã€‚æ­¤åœºæ™¯ä¸‹æ›´ä¸ºå®Œå–„çš„è§£å†³æ–¹æ¡ˆåˆ™æ˜¯å¾®å‰ç«¯ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨å‘è¿™ä¸ªæ–¹å‘æ¢ç´¢ï¼Œæœ¬æ–‡æä¾›çš„æ˜¯ä¸€ç§åŸºç¡€çš„è§£å†³å¤šæŠ€æœ¯æ ˆä¸šåŠ¡åœºæ™¯çš„æ€è·¯ï¼Œå¦‚æœæœ‰æ›´å¥½çš„æ–¹æ¡ˆæ¬¢è¿å¤§å®¶ä¸€èµ·è®¨è®ºï½</p><h2 id="æ¨èé˜…è¯»" tabindex="-1"><a class="header-anchor" href="#æ¨èé˜…è¯»" aria-hidden="true">#</a> æ¨èé˜…è¯»</h2>`,11),b={href:"https://juejin.im/editor/posts/5eef64de518825658c1ad1f6",target:"_blank",rel:"noopener noreferrer"},h={href:"https://juejin.cn/post/6844904182822993927",target:"_blank",rel:"noopener noreferrer"},g=e("h2",{id:"æ‹›è´¤çº³å£«",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#æ‹›è´¤çº³å£«","aria-hidden":"true"},"#"),i(" æ‹›è´¤çº³å£«")],-1),f=e("p",null,"æ”¿é‡‡äº‘å‰ç«¯å›¢é˜Ÿï¼ˆZooTeamï¼‰ï¼Œä¸€ä¸ªå¹´è½»å¯Œæœ‰æ¿€æƒ…å’Œåˆ›é€ åŠ›çš„å‰ç«¯å›¢é˜Ÿï¼Œéš¶å±äºæ”¿é‡‡äº‘äº§å“ç ”å‘éƒ¨ï¼ŒBase åœ¨é£æ™¯å¦‚ç”»çš„æ­å·ã€‚å›¢é˜Ÿç°æœ‰ 50 ä½™ä¸ªå‰ç«¯å°ä¼™ä¼´ï¼Œå¹³å‡å¹´é¾„ 27 å²ï¼Œè¿‘ 3 æˆæ˜¯å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œå¦¥å¦¥çš„é’å¹´é£æš´å›¢ã€‚æˆå‘˜æ„æˆæ—¢æœ‰æ¥è‡ªäºé˜¿é‡Œã€ç½‘æ˜“çš„â€œè€â€å…µï¼Œä¹Ÿæœ‰æµ™å¤§ã€ä¸­ç§‘å¤§ã€æ­ç”µç­‰æ ¡çš„åº”å±Šæ–°äººã€‚å›¢é˜Ÿåœ¨æ—¥å¸¸çš„ä¸šåŠ¡å¯¹æ¥ä¹‹å¤–ï¼Œè¿˜åœ¨ç‰©æ–™ä½“ç³»ã€å·¥ç¨‹å¹³å°ã€æ­å»ºå¹³å°ã€æ€§èƒ½ä½“éªŒã€äº‘ç«¯åº”ç”¨ã€æ•°æ®åˆ†æåŠå¯è§†åŒ–ç­‰æ–¹å‘è¿›è¡ŒæŠ€æœ¯æ¢ç´¢å’Œå®æˆ˜ï¼Œæ¨åŠ¨å¹¶è½åœ°äº†ä¸€ç³»åˆ—çš„å†…éƒ¨æŠ€æœ¯äº§å“ï¼ŒæŒç»­æ¢ç´¢å‰ç«¯æŠ€æœ¯ä½“ç³»çš„æ–°è¾¹ç•Œã€‚",-1),x=e("p",null,[i("å¦‚æœä½ æƒ³æ”¹å˜ä¸€ç›´è¢«äº‹æŠ˜è…¾ï¼Œå¸Œæœ›å¼€å§‹èƒ½æŠ˜è…¾äº‹ï¼›å¦‚æœä½ æƒ³æ”¹å˜ä¸€ç›´è¢«å‘Šè¯«éœ€è¦å¤šäº›æƒ³æ³•ï¼Œå´æ— ä»ç ´å±€ï¼›å¦‚æœä½ æƒ³æ”¹å˜ä½ æœ‰èƒ½åŠ›å»åšæˆé‚£ä¸ªç»“æœï¼Œå´ä¸éœ€è¦ä½ ï¼›å¦‚æœä½ æƒ³æ”¹å˜ä½ æƒ³åšæˆçš„äº‹éœ€è¦ä¸€ä¸ªå›¢é˜Ÿå»æ”¯æ’‘ï¼Œä½†æ²¡ä½ å¸¦äººçš„ä½ç½®ï¼›å¦‚æœä½ æƒ³æ”¹å˜æ—¢å®šçš„èŠ‚å¥ï¼Œå°†ä¼šæ˜¯â€œ 5 å¹´å·¥ä½œæ—¶é—´ 3 å¹´å·¥ä½œç»éªŒâ€ï¼›å¦‚æœä½ æƒ³æ”¹å˜æœ¬æ¥æ‚Ÿæ€§ä¸é”™ï¼Œä½†æ€»æ˜¯æœ‰é‚£ä¸€å±‚çª—æˆ·çº¸çš„æ¨¡ç³Šâ€¦ å¦‚æœä½ ç›¸ä¿¡ç›¸ä¿¡çš„åŠ›é‡ï¼Œç›¸ä¿¡å¹³å‡¡äººèƒ½æˆå°±éå‡¡äº‹ï¼Œç›¸ä¿¡èƒ½é‡åˆ°æ›´å¥½çš„è‡ªå·±ã€‚å¦‚æœä½ å¸Œæœ›å‚ä¸åˆ°éšç€ä¸šåŠ¡è…¾é£çš„è¿‡ç¨‹ï¼Œäº²æ‰‹æ¨åŠ¨ä¸€ä¸ªæœ‰ç€æ·±å…¥çš„ä¸šåŠ¡ç†è§£ã€å®Œå–„çš„æŠ€æœ¯ä½“ç³»ã€æŠ€æœ¯åˆ›é€ ä»·å€¼ã€å½±å“åŠ›å¤–æº¢çš„å‰ç«¯å›¢é˜Ÿçš„æˆé•¿å†ç¨‹ï¼Œæˆ‘è§‰å¾—æˆ‘ä»¬è¯¥èŠèŠã€‚ä»»ä½•æ—¶é—´ï¼Œç­‰ç€ä½ å†™ç‚¹ä»€ä¹ˆï¼Œå‘ç»™ "),e("code",null,"ZooTeam@cai-inc.com")],-1),_=e("p",null,[e("img",{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/7/24/1737e608cf27b9f1~tplv-t2oaga2asx-image.image",alt:""})],-1);function w(C,y){const n=t("ExternalLinkIcon");return d(),r("div",null,[m,e("p",null,[i("> è¿™æ˜¯ç¬¬ 61 ç¯‡ä¸æºæ°´çš„åŸåˆ›ï¼Œæƒ³è·å–æ›´å¤šåŸåˆ›å¥½æ–‡ï¼Œè¯·æ‰« ğŸ‘† ä¸Šæ–¹äºŒç»´ç å…³æ³¨æˆ‘ä»¬å§~ æœ¬æ–‡é¦–å‘äºæ”¿é‡‡äº‘å‰ç«¯å›¢é˜Ÿåšå®¢ï¼š"),e("a",v,[i("å¦‚ä½•å¼€å‘è·¨æ¡†æ¶çš„ç»„ä»¶"),s(n)])]),c,e("ul",null,[e("li",null,[e("a",u,[i("postMessage"),s(n)]),i(" å¯ä»¥è·¨æ–‡æ¡£é€šä¿¡ï¼Œ åœ¨ IE10 çš„æ”¯æŒæ€§æœ‰é—®é¢˜ï¼Œåœ¨ IE11 åŠä»¥ä¸Šå¯ä»¥å®Œç¾è§£å†³è·¨åŸŸé—®é¢˜ã€‚ç¬”è€…éœ€è¦æ”¯æŒIE9+ï¼Œæ‰€ä»¥æ²¡æœ‰é‡‡ç”¨ postMessage")])]),p,e("p",null,[e("a",b,[i("åˆ†åˆ†é’Ÿæ•™ä¼šä½ æ­å»ºä¼ä¸šçº§çš„ npm ç§æœ‰ä»“åº“"),s(n)])]),e("p",null,[e("a",h,[i("ä¸€ä»½å€¼å¾—æ”¶è—çš„ Git å¼‚å¸¸å¤„ç†æ¸…å•"),s(n)])]),g,f,x,_])}const $=a(o,[["render",w],["__file","å¦‚ä½•å¼€å‘è·¨æ¡†æ¶çš„ç»„ä»¶.html.vue"]]);export{$ as default};
