import{_ as t,z as o,A as c,Y as a,C as n,U as s,a6 as p,Q as i}from"./framework-cb9358d9.js";const r={},l=a("p",null,[a("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4eb6a01e6564840817b127265b07edd~tplv-k3u1fbpfcp-zoom-1.image",alt:""})],-1),d=a("p",null,[a("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7aab91aab72f44748b0a551dbdf840b9~tplv-k3u1fbpfcp-watermark.image?",alt:"皓文.png"})],-1),u={href:"https://www.zoo.team/article/data-statistics",target:"_blank",rel:"noopener noreferrer"},h=p('<h2 id="前情提要" tabindex="-1"><a class="header-anchor" href="#前情提要" aria-hidden="true">#</a> 前情提要</h2><p>​ <strong>本文根据 2022.05.28 日，《前端早早聊大会》 的“性能”专场分享整理而来。</strong></p><p>​ 本文首先分享了我司自研的性能检测平台百策的基本功能和应用，主要介绍了百策中基于数据统计的能力对指标得分模型及指标区间模型的选择和设计，并最终通过修复工具简化问题的修复，提升页面渲染效率，并反映到指标上。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90fb2c60e71d42bb989c3cf14de0d47a~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h2 id="性能指标的价值" tabindex="-1"><a class="header-anchor" href="#性能指标的价值" aria-hidden="true">#</a> 性能指标的价值</h2><p>​ 随着互联网环境的飞速迭代，同质化产品的与日俱增，性能的优劣往往是在同代产品中决出的胜负手，同时也是用户体验的重要一环。越来越多的工程和产品对性能的重视程度也在提升，Web 页面渲染相关的指标更是一个网站性能的重要评判标准。</p><h2 id="一、百策平台简介" tabindex="-1"><a class="header-anchor" href="#一、百策平台简介" aria-hidden="true">#</a> 一、百策平台简介</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/773b1427bc3d4ccc8d34eef909bc2866~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220605194440058"></p>',8),m={href:"https://github.com/GoogleChrome/lighthouse",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/GoogleChrome/puppeteer",target:"_blank",rel:"noopener noreferrer"},k=p('<h3 id="自建的意义" tabindex="-1"><a class="header-anchor" href="#自建的意义" aria-hidden="true">#</a> 自建的意义</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab2ce3e1b9574c2ca11a1549784bd9ef~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h4 id="更稳定的服务" tabindex="-1"><a class="header-anchor" href="#更稳定的服务" aria-hidden="true">#</a> 更稳定的服务</h4><p>​ 我们都知道谷歌的服务例如 Lighthouse 在国内的使用是不稳定的，百策采用的是本地化部署，同其他工具和第三方网站比有更稳定的服务。</p><h4 id="数据安全" tabindex="-1"><a class="header-anchor" href="#数据安全" aria-hidden="true">#</a> 数据安全</h4><p>​ 在我们的应用场景中要测的大部分页面为公司内部站点，采集的数据如果外传，会造成数据安全等问题。</p><h4 id="检测标准自定义" tabindex="-1"><a class="header-anchor" href="#检测标准自定义" aria-hidden="true">#</a> 检测标准自定义</h4><p>​ 可以基于自研的平台做一些自定义的开发，比如现阶段我们结合数据统计的能力去定制不同的性能指标标准。</p><h4 id="流程接入" tabindex="-1"><a class="header-anchor" href="#流程接入" aria-hidden="true">#</a> 流程接入</h4><p>​ 自研的平台可以和公司的其他基建做联动控制，例如接入内部的 CI/CD 工具做发版流程限制。</p><h3 id="基础架构" tabindex="-1"><a class="header-anchor" href="#基础架构" aria-hidden="true">#</a> 基础架构</h3><p><img src="https://www.zoo.team/images/upload/upload_93505630ba4652b636ecf33702f47510.png" alt=""></p><p>前端主要使用的是 React 、 Antd 、ECharts 等，包含常规页面的展示和性能结果及走势的展示效果。服务端基于 Nest 开发，接入 Sentry 做报警监控，helmet 用于保护系统免受一些 Web 漏洞影响；node-schedule 用于每周定时计算已统计入系统的页面性能，并通过 nodemailer 发送邮件；最主要的检测服务基于 Puppeteer 和 Lighthouse 开发；数据分析模块提供了算分模型及指标区间模型的统计模型，修复优化工具包含了组件式和插件式的图片格式优化功能等。</p>',13),f={href:"https://juejin.cn/post/6887580440803311630",target:"_blank",rel:"noopener noreferrer"},g=p('<h2 id="二、指标结果分析" tabindex="-1"><a class="header-anchor" href="#二、指标结果分析" aria-hidden="true">#</a> 二、指标结果分析</h2><h3 id="检测结果页" tabindex="-1"><a class="header-anchor" href="#检测结果页" aria-hidden="true">#</a> 检测结果页</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af97b55b28bb48de935a961936d3228a~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 首先来看一下使用百策对目标页面检测完的效果，我们会得到如上图所示的检测结果页，结果页会有性能检测情况以及各项指标的解释说明。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/48641ec8cbe949d1b4aa8ffac7c541a8~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 通过刚才检测得出的各项指标结果，我们会得到一系列前端性能指标，诸如影响加载速度的首屏加载时间（FCP）、最大内容绘制间（LCP），影响响应速度的首次输入延迟时间（FID）、可交互延迟时间（TTI）以及视觉稳定性相关的指标，累计偏移量（CLS）等，相信做过性能优化的同学对这些指标并不陌生。 同时还有些公司各业务为了度量匹配不同的性能场景及缺陷， 还通过 PerformanceObserver 等 API 设置不同的自定义指标，诸如用户计时或服务计时等。</p><p>​ 那么测得了这么多指标耗时，你的网站性能到底怎么样？如果一个没有做过相关性能优化的同学，或者是你的老板根本不是前端的开发，想关心下你的网站性能怎么样，你要如何回复他们？可能你会罗列一堆耗时、偏移数值等数据，但他们看到这些数值肯定一脸懵逼，根本感知不到你的站点性能到底怎么样，这也是很多性能测试平台的相同的问题，数据并没有做量化处理。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc2245bdb8c84fb3945bae8fd2d6d8bd~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 通过指标数值，是不能很直观的看出来要测的网站性能到底怎么样，没有指标结果的量化处理，就没法得到指标的得分和对比标准，根本感知不到检测的结果到底怎么样，没有参考，这些数据在业内的水平就不清楚了。所以为了能对“性能到底怎么样”有更清晰的认知，就要有一套新的标准来度量。</p><h3 id="算分模型-区间模型" tabindex="-1"><a class="header-anchor" href="#算分模型-区间模型" aria-hidden="true">#</a> 算分模型 &amp; 区间模型</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a6e2ac2837347069e71abd5a161aa2a~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 这里我们以 A、B 两个网站为例，分别测得其 LCP 数据。再通过我们设计的2种指标得分模型，可以得到如上的结果。算分模型会得到 S-E 6 个区间，不同区间给不同的评分。区间模型通过指标的耗时情况，针对耗时的不同时间区间落点求得其得分情况。</p><h4 id="算分模型" tabindex="-1"><a class="header-anchor" href="#算分模型" aria-hidden="true">#</a> 算分模型</h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e581a3a926b4437b06f44c67ec874ff~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 可以看出 A 网站的 LCP 耗时 2125ms 在模型分布中处于中上等水平，在算分模型中的 B 区间，而 B 网站的 8339ms 耗时则提升空间比较大，处于 D 区间内，通过右表也可以看出具体的得分控制情况。</p><h4 id="区间模型" tabindex="-1"><a class="header-anchor" href="#区间模型" aria-hidden="true">#</a> 区间模型</h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/112b704072fb4a29a3bd12187cd68e2c~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 在算分模型中，我们根据指标的不同分位数标准来划分从优秀到较差的等级区间，这里采用指标不同分位数（25 百分位数、75 百分位数）的控制方法，同样也可以很明显的观察出 A、B 两个网站的指标所处区间。下面就介绍下我们系统对这两个模型的选择和设计。</p><h3 id="数据量化处理" tabindex="-1"><a class="header-anchor" href="#数据量化处理" aria-hidden="true">#</a> 数据量化处理</h3><p>​ 就像我们学生时代一样，老师通常可以通过成绩的得分高低来判断学习的好坏（当然这个也不绝对～）。类比到评分系统而言，一个指标的量化结果评分更能直观的体现站点的优势和瓶颈。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b1e3012d5ef4636a1419169d51e6680~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 对收集到数据做数据特征的抽象，可以借助统计模型的能力来进行，通过建立对应的统计模型更便于我们对同类数据的分析和处理，再根据分析和处理结论建立数据和结果的映射关系。简而言之建立模型就是一个发现规律，建立关系的过程。</p><p>​ 统计模型是利用系统化的符号和数学表达式对问题的一种抽象描述，其建立过程可看作是把问题定义转换为数学问题的过程。所以我们可以通过数学模型的思想来进行后续的分析。类比到数学关系中，这里的 x 就是指标数据 ，y 就是要得到的指标评分。对应刚才提到 S-E 的算分区间，其中 f(x) 就是我们要求解的模型。</p><p>建立统计模型主要可以分为以下五个步骤：</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ccae96b28c734236998550394ffd6925~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>第一阶段：定义问题&amp;收集 对性能指标的定量分析就是我们要解决的问题，所以我们就要对该问题进行指标类数据的收集和整理，后面也会讲到本次建立模型所依赖的数据来源及工具。</p><p>第二阶段：选择建模方法 这个也是对数据的整理和分析的阶段，通过描述性统计选择合理的建模方法。</p><p>&gt; 描述性统计是指运用制表和分类，图形以及计算概括性数据来描述一组数据特征的各项活动，一般通过数据的平均值、标准差、四分位数等指标结合数据可视化的处理来比较直观的观察数据的特征，比如一些集中、离散、分布的相关趋势。</p><p>第三阶段：推导出模型的公式 这一步也是从概念到理论到过程，针对选择的模型，计算出关键参数从而推导出模型公式。</p><p>第四阶段：优化和求解 有了对应的数学表达式，适配变量和边界值情况对模型进行调整和优化，并通过不同变量和约束条件进行求解。</p><p>第五阶段：结果产出 得出的结果用于后续该类问题的决策，同时也是对模型的一个检验过程，通过预测模型来帮助我们做后续的判断。</p><h3 id="定义问题-数据收集" tabindex="-1"><a class="header-anchor" href="#定义问题-数据收集" aria-hidden="true">#</a> 定义问题&amp;数据收集</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4584338962544983b7e55d3c0b8eefca~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>本次收集性能指标的过程主要是采用 HttpArchive + BigQuery 的方式。</p><p>HttpArchive： 是一个流行网站的性能数据收集站，通过每个月抓取由 Chrome 用户体验报告（CrUX） 提供的上百万的桌面和移动设备的 URL，并对这些网站的性能数据进行收集和存储。</p><p>BigQuery：是 Google 推出的一项 Web 服务，拥有基于 SQL 的企业数据仓库服务的扩展，提供了快速类 SQL 查询和数据管理及可视化的能力。这里我们采用 BigQuery 进行数据拉取。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/143cfd215d5640128f586f0ac0687c8a~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h3 id="建立算分模型" tabindex="-1"><a class="header-anchor" href="#建立算分模型" aria-hidden="true">#</a> 建立算分模型</h3>',38),v={href:"https://www.zhihu.com/search?q=%E4%B8%AD%E5%BF%83%E6%9E%81%E9%99%90%E5%AE%9A%E7%90%86&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22%3A%22article%22%2C%22sourceId%22%3A72398933%7D",target:"_blank",rel:"noopener noreferrer"},_=a("strong",null,"中心极限定理",-1),w=p('<p>​ 其实这个也很好理解，在对日常的统计分析中，很多场景的数据也是符合正态分布的特征的，比如：大部分公司的评级体系，成人的智商的分布、部分投资回报分布等。从这里也可以看出平凡才是大多数，极好和极差都是少数。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/278b9a9c1a014fe6be4c5cf5a31bb040~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 正态分布相信大家并不陌生，正态分布也称“常态分布”，又名高斯分布，最早由法国数学家棣莫弗在求二项分布的渐近公式中得到。在数学、物理及工程等领域都有很多应用，在统计学的许多方面有着重大的影响力。其图形两头低，中间高，左右对称，因其曲线呈钟形，因此人们又经常称之为钟形曲线。</p><p>​ 建立正态分布的模型主要包括以下五个步骤：</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa613c64e67f4f2c946e5ee706a10440~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><ol><li>数据预处理</li><li>样本正态性检验和处理</li><li>正态分布图像拟合</li><li>区间 Z 分布的计算</li><li>确定得分区间及结果</li></ol><h4 id="数据预处理" tabindex="-1"><a class="header-anchor" href="#数据预处理" aria-hidden="true">#</a> 数据预处理</h4><p>​ 由于网站采集数据的不稳定性，可能会存在因部分数据过大或过小而产生的脏数据。为防止异常数据造成算法精度失真，需要首先剔除空数据及边界异常值。本次样本采集的数据是 2022 年 5 月上旬 FCP 的指标数据，本次样本中脏数据约占总数量的 1.5% 。</p><p>&lt;img src=&quot;https://www.zoo.team/images/upload/upload_59db3a949ca0478e1c099d4d7f8ce024.png&quot; alt=&quot;image-20220530172851852&quot; style=&quot;zoom: 33%;&quot; /&gt;</p><p>​ 可以通过统计 FCP 时长落在某个时间段内的样本数量，绘制样本过滤后数据的分布直方图来观察数据的基本特征。</p><p>&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20182aaced1144878aa09071917a65c2~tplv-k3u1fbpfcp-zoom-1.image&quot; /&gt;</p><p>​ 通过该份样本的直方图可以看出大部分的数据分布在 1000ms ~ 2500ms。</p><h4 id="数据正态性检验-处理" tabindex="-1"><a class="header-anchor" href="#数据正态性检验-处理" aria-hidden="true">#</a> 数据正态性检验 &amp; 处理</h4><p>​ 正态性检验的原假设是“数据服从正态分布”，因此我们要预先对数据进行正态性的检验，符合正态性才能进行基于正态分布的相关分析。如果不符合正态性，则要对数据进行修正转换处理。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9961d95050df47e4b052e56c57149df0~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>',15),y={href:"https://baike.baidu.com/item/spss/2351375?fr=aladdin",target:"_blank",rel:"noopener noreferrer"},j=p('<p>&gt; Q-Q 是 Quantile-Quantile 的缩写，也就是分位数-分位数图。因为这个图中横坐标和纵坐标都利用了分位数，横坐标是正态分位数，纵坐标是实际数据的分位数。所以 Q-Q 图的思想就是比较理论分位数和实际分位数的差距，如果理论分位数和实际分位数没什么差别的话，图中所有的点应该都在一条直线上；如果差别大，那就会偏离直线比较大。</p><p>​ 根据 Q-Q 图反馈的正态，很明显同直线的偏移比较大，目前的原数据是不能进行后续正态分析的，所以要对数据进行正态化的处理。</p><p>​ 根据上文中原数据的分布直方图可以看出，数据是偏态分布的。根据下图可以看出，偏态分布分为两种情况，左偏又叫负偏态，以及右偏又叫正偏态。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07a9dff07aa84d56bad9a169a9d623c5~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>可以根据数据的偏态分布表现来确定不同的正态处理方法，下面是一些常见的处理方法：</p><ul><li>对数变换：适用于相乘关系的数据、高度偏态的数据</li><li>平方根变换：适用于泊松分布（方差与均数近似相等）的数据、轻度偏态的数据</li><li>倒数变换 1/x：适用于两端波动较大的数据</li><li>反正弦变换：适用于百分比的数据、中度偏态的数据</li></ul><p>​ 经过数据转换，结合 Q-Q 图验证，可以采用对原数据取自然对数的方法来进行转换，其转换后的正态 Q-Q 图如下，可以看出通过转换后大部分数据分布在一条直线上。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cce8d9ac0e1d4c5f814dd167020d0c6e~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 如下图所示，通过数据转换后的直方图也可以看出，转换后的数据已基本具备正态分布的相关特征。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c693a9cb27ec4a6b8a9b356778252556~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h4 id="正态分布拟合" tabindex="-1"><a class="header-anchor" href="#正态分布拟合" aria-hidden="true">#</a> 正态分布拟合</h4><p>​ 在算分模型中，对图像的拟合一般有两种方法，一种是通过最小二乘法，另一种是通过正态分布计算公式。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d190cc484f104daf899bcb725f76cb0d~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 最小二乘法的拟合方法通常是采用计算每个样本点到拟合曲线的距离来进行图像拟合。对于指标数据这种数据量比较大的数据源（每个月会有几十万甚至上百万的网站指标数据报告），上述方式的计算量无疑是很大的。所以本次采用正态分布计算公式的方法来进行后续的拟合处理。</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e667e99a3934410f98b72d4f4e64e9ab~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p>',15),z={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F/828980",target:"_blank",rel:"noopener noreferrer"},x={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E6%95%B0%E5%AD%A6%E6%9C%9F%E6%9C%9B/5362790",target:"_blank",rel:"noopener noreferrer"},C={href:"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%E6%96%B9%E5%B7%AE/3108412",target:"_blank",rel:"noopener noreferrer"},E=p(`<p>正态分布计算公式：</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d0b20fcb1ad446e9bbd845153ac1ebc~tplv-k3u1fbpfcp-zoom-1.image" alt="img"></p><p>方差计算公式：</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65b776adc434487c88b93c1b7a757dab~tplv-k3u1fbpfcp-zoom-1.image" alt="1d7eb73fc9d032d41b44ce6c38004aec"></p><p>本次样本数据的数学期望（平均值） μ = 7.66536 、标准差 σ = 0.55905 ，记做 N(7.66536,0.55905 ^2）。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
* 正态分布函数
* @@param <span class="token parameter">x</span> 数据
* @@param <span class="token parameter">mean</span> 平均数
* @@param <span class="token parameter">stdev</span> 标准差
*/</span>
<span class="token keyword">function</span> <span class="token function">normalDistributionfun</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> mean<span class="token punctuation">,</span> stdev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">*</span> stdev<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">-</span> mean<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> mean<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> stdev <span class="token operator">*</span>               
            stdev<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
​
<span class="token doc-comment comment">/**
* 方差计算函数
* @@param <span class="token parameter">mean</span> 平均数
*/</span>
<span class="token keyword">function</span> <span class="token function">stdCalc</span> <span class="token punctuation">(</span><span class="token parameter">mean</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span>
      total <span class="token operator">+=</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> meanVal <span class="token operator">=</span> total <span class="token operator">/</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> SDprep <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span>
      SDprep <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> meanVal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> SDresult <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>SDprep<span class="token operator">/</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> SDresult
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2324ed52934944a8b6b06289101e2c01~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><p>​ 再回顾下上面图像转换的过程，首先从源数据的直方图观察出数据特征，然后采用对数转换的形式对原数据进行处理，处理后的数据通过直方图也可以看出已基本具备正态分布的相关特征，后续通过正态分布方程的方法对图像进行拟合。</p><h4 id="z-分布转换" tabindex="-1"><a class="header-anchor" href="#z-分布转换" aria-hidden="true">#</a> Z 分布转换</h4><p><img src="https://www.zoo.team/images/upload/upload_4f3a8946fefde5b6bb6275cbc63692df.png" alt=""></p><p>​ 得分等级划分中我们通过 Z 分布的 “ 6<strong>σ</strong> ” 原则来判断，根据刚才求的数据偏离平均数多少个标准差来确定等分区间。</p><h5 id="z-分布" tabindex="-1"><a class="header-anchor" href="#z-分布" aria-hidden="true">#</a> Z 分布</h5><p>​ Z 分布又由称作标准正态分布，是正态分布中的一种，其平均数和标准差都是固定的，平均数为 μ = 0，标准差为 σ = 1。每个区间的比例也是固定的，我们可以通过该特性，来对得分区间进行控制。</p><p><img src="https://www.zoo.team/images/upload/upload_86e40f1d7f2bf18bc862913d29f85697.png" alt=""></p><h5 id="z-变换" tabindex="-1"><a class="header-anchor" href="#z-变换" aria-hidden="true">#</a> Z 变换</h5><p>​ 既然选取了 Z 分布相关特性作后续分析，就要把刚才得到的拟合图像转换为 Z 分布，转换的过程也叫做 Z 变换的过程。</p><p><img src="https://www.zoo.team/images/upload/upload_b26a58681e32479ac0af4d289868e33b.png" alt=""> 这里我们采用 Z 分布的计算方法来进行指标分布区间的数值计算。</p><p>Z 分布计算公式</p><p>&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc5948d534ca4bafb669c198bd6f90fd~tplv-k3u1fbpfcp-zoom-1.image&quot; style=&quot;zoom:10%;&quot; /&gt;</p><p>Z 值为偏离平均数多少个标准差，均值时间 μ 通过对转换后数据的逆运算约为 1900.36ms。</p><p>​ 通过已知的 标准差区间（-3～3），均值时间 μ，以及标准差 σ 可以求得不同区间的时间范围 X。</p><p><img src="https://www.zoo.team/images/upload/upload_59b5f9d0f92c65129cb51d50f56dbd29.png" alt=""></p><p>下面是根据本次样本数据的得出的指标范围和得分列表：</p><p><img src="https://www.zoo.team/images/upload/upload_49edad611f8921fb39ab4e80554fa126.jpeg" alt=""></p><h3 id="建立阈值区间模型" tabindex="-1"><a class="header-anchor" href="#建立阈值区间模型" aria-hidden="true">#</a> 建立阈值区间模型</h3><p>​ 对于指标的阈值区间判断我们这里参考了 Google CrUX 的标准，通过百分位模型来确定阈值。当观测数据很多时，百分位数的数值相对稳定，通常用来确定一些检验指标和正常值范围。</p><p>&gt; 百分位数：将一组数据从小到大排序，并计算相应的累计百分位，则某一百分位所对应数据的值就称为这一百分位的百分位数，N% 位置的值称第 N 百分位数。</p><p>​ 通过拉取的样本数据，百分位数计算可以通过 percentile.js 来进行，也可以在 Bigquery 中通过百分位数语法的 Sql 实现。75 百分位数是对大多数的网站访问所设定的水平，在 CrUX 中，采用 75 百分位数和 25 百分位数的形式来对指标的阈值区间进行评判，这里是我们针对 LCP、FCP、TTI 指标设置的建议值。</p><p><img src="https://www.zoo.team/images/upload/upload_0b2ae990150320a999ac96f80ae655c8.jpeg" alt=""></p><p>​ 在保证数据受异常值影响较小的情况下，可以根据不同的业务需求设置不同的阈值，比如对性能要求较高的前台页可以采用更加严格的标准，例如低于 35 百分位数即为较差。</p><p><img src="https://www.zoo.team/images/upload/upload_3044ce959ba0ca68f12efba2a26965b1.jpeg" alt=""></p><p>​ 如果对某项核心指标或自定义指标比较关心，同样的，可以通过排序得出在同类网站中的百分位数排名占比，以此来判断具体的排名信息。</p><h3 id="指标变化趋势" tabindex="-1"><a class="header-anchor" href="#指标变化趋势" aria-hidden="true">#</a> 指标变化趋势</h3><h4 id="web-核心指标变化趋势" tabindex="-1"><a class="header-anchor" href="#web-核心指标变化趋势" aria-hidden="true">#</a> Web 核心指标变化趋势：</h4><p><img src="https://www.zoo.team/images/upload/upload_54e2d063567df5477032d1246c4639a9.jpeg" alt=""></p><p>​ 这里收集近两年 2020.1- 2022.5 FCP*、<em>LCP</em>、*TTI 半年度 75 百分位数指标情况，可以看出随着近些年来终端性能以及前端现代框架的不断更新，以及各大网站对性能的重视度提升，各指标 75 百分位数的耗时数据都有明显降低。</p><h4 id="cdn-指标变化" tabindex="-1"><a class="header-anchor" href="#cdn-指标变化" aria-hidden="true">#</a> CDN 指标变化：</h4><p><img src="https://www.zoo.team/images/upload/upload_110931b7278e324c8711e15745a61613.jpeg" alt=""></p><p>​ 同时我们还注意到请求中 CDN 的使用率近三年来，每年有近 10 % 的增长，在性能优化的过程中的重视程度也在逐渐提高。我们通过静态资源的前缀（预录入 CDN 地址）匹配，静态资源所在域名下的 IP 地址的个数，来判断静态资源使用情况的详细占比。</p><p><img src="https://www.zoo.team/images/upload/upload_5832e814d0f8b036c1c06caeccd89fee.jpeg" alt=""></p><h2 id="三、修复优化工具" tabindex="-1"><a class="header-anchor" href="#三、修复优化工具" aria-hidden="true">#</a> 三、修复优化工具</h2><p>​ <img src="https://www.zoo.team/images/upload/upload_16433e727c62551febbc68cf4cefceef.jpeg" alt=""></p><p>​ 在检测出页面的性能瓶颈时，如果要对该页面进行性能的修复和优化，需要有前置知识储备，比如我这个指标该通过什么手段来优化，哪种修复手段可以得到更好的效果，改动了其中代码还需要评估对应的业务影响，通知测试进行流程的回归。这些无疑都增加了在性能优化过程中的阻力和成本，为了解决这些痛点，减轻修复的成本，特别推出了我们内部称作为 “手动”、“半自动”、“全自动” 的修复工具。</p><h3 id="手动-修复" tabindex="-1"><a class="header-anchor" href="#手动-修复" aria-hidden="true">#</a> “手动” 修复</h3><p>​ 这里的 “手动” 修复是针对部分指标给出对应的修复建议和相关代码，可以根据建议配置进行优化处理。</p><p><img src="https://www.zoo.team/images/upload/upload_c2aab0720490996ebb092ef279c6d39a.png" alt="image-20220601155027169"></p><h3 id="半自动-修复" tabindex="-1"><a class="header-anchor" href="#半自动-修复" aria-hidden="true">#</a> “半自动” 修复</h3><p>​ “半自动”修复是指组件式的优化方案，在需要进行优化处理的地方进行组件引入，并且传入对应参数，每次引用每次生效。</p><p>​ 这里以图片为例，图像资源比任何其他资源类型占用更多的字节数，是性能优化的关键一环。由于 WebP 格式的图片相较其他类型图片而言，有体积更小、不失真的特点，所以对图片的优化多采用 WebP 的图片格式。</p><h4 id="react-img-组件-vue-lazyload-组件拓展" tabindex="-1"><a class="header-anchor" href="#react-img-组件-vue-lazyload-组件拓展" aria-hidden="true">#</a> React Img 组件 &amp; Vue-LazyLoad 组件拓展</h4><p>​ React Img 组件提供 React 项目中 img 标签包裹， Vue-LazyLoad 组件拓展对 Vue-Lazyload 进行二次包装。处理图片返回格式，根据用户浏览器兼容性提供优化后图片 WebP 格式。</p><h3 id="全自动-的修复" tabindex="-1"><a class="header-anchor" href="#全自动-的修复" aria-hidden="true">#</a> “全自动” 的修复</h3><p><img src="https://www.zoo.team/images/upload/upload_2fa57f45a572197a7ba610273fb4de77.jpeg" alt=""></p><p>​ “全自动”修复是指在当前应用中通过 Webpack 插件的形式，在应用中引用后，每次都会生效。</p><p>​ Webpack Plugin 插件通过对静态资源的格式和 CDN 白名单地址的匹配进行后续的构建处理。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">transpileDependencies</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">publicPath</span><span class="token operator">:</span><span class="token operator">&amp;</span>#<span class="token number">39</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">&amp;</span>#<span class="token number">39</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">configureWebpack</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">ImageminWebpWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">config</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          <span class="token comment">// 匹配的文件格式</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.(jpe?g|png)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token comment">// 比例参数控制</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">quality</span><span class="token operator">:</span>  <span class="token number">75</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">CDNUrl</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>#<span class="token number">39</span><span class="token punctuation">;</span>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>sitecdn<span class="token punctuation">.</span>xxx<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token operator">&amp;</span>#<span class="token number">39</span><span class="token punctuation">;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 在处理过程中主要分为构建、引用、输出三个步骤。与组件处理的类似，同样会判断用户浏览器的兼容性来决定应用哪份文件，如果浏览器兼容 WebP 格式的图片就使用处理后 <code>app.a60c22b2-webp.js</code> 反之则使用 <code>app.a60c22b2.js</code> 文件。</p><p><img src="https://www.zoo.team/images/upload/upload_b8f77190cd50fa70451a859952454c02.png" alt="image-20220601162811370"></p><h3 id="修复效果" tabindex="-1"><a class="header-anchor" href="#修复效果" aria-hidden="true">#</a> 修复效果</h3><p><img src="https://www.zoo.team/images/upload/upload_7623d0c24650fcf63cbe908d25d4c830.png" alt="image-20220601164214170"></p><p><img src="https://www.zoo.team/images/upload/upload_206ec52852b0123f606ae73c62e0933f.png" alt="image-20220601164234166"></p><p>​ 这里以某登录页为例，可以看到修复后的图片文件格式由原有的 png 优化为 WebP，图片大小发生了比较显著的变化，从原有的 2.7M 到优化后的 342kb 。</p><h3 id="修复结果" tabindex="-1"><a class="header-anchor" href="#修复结果" aria-hidden="true">#</a> 修复结果</h3><p><img src="https://www.zoo.team/images/upload/upload_fd1165e82697b73da5642726a230b68c.png" alt="image-20220601165916669"></p><p>​ 这里以 LCP 为例看下修复前后的指标变化情况，LCP 耗时由最开始的 2834ms 缩短至 825ms，从 LCP 指标的正态分布图中可以看出，指标由最原有的 B 区间提升到 S 区间，指标得分在本系统的得分模型中提高了 3 分，整体而言在样本数据的排名中提高了近 30%。</p><h2 id="四、后续迭代" tabindex="-1"><a class="header-anchor" href="#四、后续迭代" aria-hidden="true">#</a> 四、后续迭代</h2><p><img src="https://www.zoo.team/images/upload/upload_ce2243a0b7ca9a1fc9a687caa24189a2.png" alt=""></p><p>​ 下面说下我们后续的迭代方向:</p><h3 id="_1-流程控制" tabindex="-1"><a class="header-anchor" href="#_1-流程控制" aria-hidden="true">#</a> 1. 流程控制</h3><p>​ 首先就是刚才提到的在公司业务中接入流程控制，首先会对上线的版本进行性能预检测，如果不符合对应页面类型的指标阈值限制，则限制发版流程。</p><h3 id="_2-rum-接入" tabindex="-1"><a class="header-anchor" href="#_2-rum-接入" aria-hidden="true">#</a> 2. RUM 接入</h3><p>​ 通过 SDK 植入的形式，接入监控平台，采集公司真实的用户性能数据，可以更准确的收集到在当前业务场景下的性能情况，以便后续的统计分析和优化。</p><h3 id="_3-性能质量监控" tabindex="-1"><a class="header-anchor" href="#_3-性能质量监控" aria-hidden="true">#</a> 3. 性能质量监控</h3><p>​ 定期的抓取线上页面地址并对其进行性能指标测试 ，通过选取不同的特征模型进行异常检测，根据检测的结果来对已上线的页面进行性能稳定性判断。</p>`,74),P={href:"https://baike.baidu.com/item/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/217599?fr=aladdin",target:"_blank",rel:"noopener noreferrer"},A={href:"https://www.coursera.org/learn/machine-learning/home/week/9",target:"_blank",rel:"noopener noreferrer"},L=p('<h3 id="_4-更多的工具" tabindex="-1"><a class="header-anchor" href="#_4-更多的工具" aria-hidden="true">#</a> 4. 更多的工具</h3><p>​ 后续将提供更多的一站式工具来对网站进行性能优化，开箱即用的工具能大大降低对目标网站性能优化成本的同时，也能为开发者扫除“障碍”，使其更加简单的去提升自己的网站性能，毕竟“懒”才是第一生产力。</p><h2 id="五、团队介绍" tabindex="-1"><a class="header-anchor" href="#五、团队介绍" aria-hidden="true">#</a> 五、团队介绍</h2><p><img src="https://www.zoo.team/images/upload/upload_ec09cf5f7ad677a3e262a0d8adc354c9.jpeg" alt=""></p><p>​ 最后介绍下我们的团队，目前我们团队人数在 90 人左右，是一个年轻富有激情和创造力的前端团队，团队除了日常的业务之外，还在物料体系、工程平台、搭建平台、数据分析及可视化等方向进行技术探索和实战，推动并落地了一系列的内部技术产品，后续也将持续探索前端技术体系的新边界，可以添加我们团队的微信公众号了解更多信息。当然如果你想参与这些有趣好玩的技术，寻找内推机会或者对本次分享有相关问题和建议，也可以添加我的个人微信进行后续讨论。</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>​ 本文通过样本数据的指标分布建立了两种不同的统计模型：</p><p>​ 1、根据 Z 分布的 6<strong>σ</strong> 原则建立得分模型，来更准确地获取测试网站指标分数情况</p><p>​ 2、根据指标的百分位模型为指标优化提供可参考的数据标准</p><p>​ 上述两种模型为百策提供了检测能力的拓展，同时也可普适于大多数性能检测系统。另外，建模也是一项富有创造性的工作，对任何问题，“没有唯一正确的模型”。对于同一个问题，我们同样可以从不同角度对其构建出不同的模型进行分析。除了本次分享提到的基于数据统计的应用，我们还可以借助其他学科和领域的相关知识来对前端的能力进行扩充，助力前端生态不断繁荣。</p><h2 id="qa" tabindex="-1"><a class="header-anchor" href="#qa" aria-hidden="true">#</a> QA</h2><p><strong>Q：所有的指标都可以采用类似的量化处理吗？</strong></p><p>A：目前针对耗时类指标诸如：加载耗时、交互耗时类指标等是可以使用现有的处理方法，但是对于是否开启 Gzip 、是否启用 http2.0 等单向指标判断是不适用这类的量化处理，同时我们也建议对于这种指标采用占比率的方式来进行量化处理。</p><p><strong>Q：在对发布流程的限制里，你们的平台采取了什么样的标准来卡发布流程的？</strong></p><p>A：在我们的平台中，会根据不同的页面类型制定不同的标准，比如前台的渲染和图片加载较多，为了更好的用户体验，通常会采用更严格的指标标准，比如对核心指标 FCP 、LCP 、TTI、CLS 采用最低 35 分位数的标准进行限制，中后台的页面表单较多，就会采用较低的 25 分位数的标准进行限制。</p><p><strong>Q：在算分模型中，除了使用 6 个区间来判断得分情况，还能不能做其他的分数区间控制？</strong></p><p>A：除了根据 6<strong>σ</strong> 的标准进行得分的控制，也可以参考 Z 分位数表（标准正态分布表），指标区间划分在标准正态分布中的所占面积给予不同的判断标准，不同的区间划分可以精确到小数点后两位，通过不同的概率区间可以实现细化的分数控制。</p><h2 id="推荐阅读" tabindex="-1"><a class="header-anchor" href="#推荐阅读" aria-hidden="true">#</a> 推荐阅读</h2>',18),Q={href:"https://juejin.cn/post/7106652838800916517",target:"_blank",rel:"noopener noreferrer"},B={href:"https://juejin.cn/post/7104055306396631076",target:"_blank",rel:"noopener noreferrer"},D={href:"https://juejin.cn/post/7101457212085633054",target:"_blank",rel:"noopener noreferrer"},q={href:"https://juejin.cn/post/7098854314365419533",target:"_blank",rel:"noopener noreferrer"},S=a("p",null,'[如何基于 WebComponents 封装 UI 组件库](https://juejin.cn/post/7096265630466670606 "# 如何基于 WebComponents 封装 UI 组件库")',-1),I=a("h2",{id:"开源作品",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#开源作品","aria-hidden":"true"},"#"),n(" 开源作品")],-1),W=a("ul",null,[a("li",null,"政采云前端小报")],-1),Z={href:"https://www.zoo.team/openweekly/",target:"_blank",rel:"noopener noreferrer"},F=a("ul",null,[a("li",null,"商品选择 sku 插件")],-1),N={href:"https://github.com/zcy-inc/skuPathFinder-back",target:"_blank",rel:"noopener noreferrer"},T=a("h2",{id:"招贤纳士",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#招贤纳士","aria-hidden":"true"},"#"),n(" 招贤纳士")],-1),U=a("p",null,"政采云前端团队（ZooTeam），一个年轻富有激情和创造力的前端团队，隶属于政采云产品研发部，Base 在风景如画的杭州。团队现有 60 余个前端小伙伴，平均年龄 27 岁，近 4 成是全栈工程师，妥妥的青年风暴团。成员构成既有来自于阿里、网易的“老”兵，也有浙大、中科大、杭电等校的应届新人。团队在日常的业务对接之外，还在物料体系、工程平台、搭建平台、性能体验、云端应用、数据分析及可视化等方向进行技术探索和实战，推动并落地了一系列的内部技术产品，持续探索前端技术体系的新边界。",-1),V=a("p",null,[n("如果你想改变一直被事折腾，希望开始能折腾事；如果你想改变一直被告诫需要多些想法，却无从破局；如果你想改变你有能力去做成那个结果，却不需要你；如果你想改变你想做成的事需要一个团队去支撑，但没你带人的位置；如果你想改变既定的节奏，将会是“5 年工作时间 3 年工作经验”；如果你想改变本来悟性不错，但总是有那一层窗户纸的模糊… 如果你相信相信的力量，相信平凡人能成就非凡事，相信能遇到更好的自己。如果你希望参与到随着业务腾飞的过程，亲手推动一个有着深入的业务理解、完善的技术体系、技术创造价值、影响力外溢的前端团队的成长历程，我觉得我们该聊聊。任何时间，等着你写点什么，发给 "),a("code",null,"ZooTeam@cai-inc.com")],-1),M=a("p",null,[a("img",{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/98d3aa3d1f8646a8bcda8cfd9e335a4b~tplv-k3u1fbpfcp-zoom-1.image",alt:""})],-1);function R(G,X){const e=i("ExternalLinkIcon");return o(),c("div",null,[l,d,a("p",null,[n("> 这是第 147 篇不掺水的原创，想获取更多原创好文，请搜索公众号关注我们吧~ 本文首发于政采云前端博客："),a("a",u,[n("数据统计在性能检测中的应用"),s(e)])]),h,a("p",null,[n("​ 我司自研的性能平台百策可用于检测、分析前台和中后台页面，并提供相关修复方案。其主要的检测功能基于 "),a("a",m,[n("Chrome Lighthouse"),s(e)]),n(" 和 "),a("a",b,[n("Pupeteer"),s(e)]),n(" 开发，做过前端性能优化的同学对 Lighthouse 并不陌生，其包含了很全面的页面检测功能，那么可能有的同学会问了，为什么有现成的工具还要二次开发呢？直接用他不香吗？我们的答案是香，但是没这么香，下面说下主要原因：")]),k,a("p",null,[n("​ 在之前的分享中我们已经有同学对《"),a("a",f,[n(" 如何从 0 到 1 搭建性能检测系统"),s(e)]),n("》 做了分享，这里就不再赘述，后面主要分享下数据分析以及修复优化工具两个模块。")]),g,a("p",null,[n("​ 在对相对结果的评判中，我们往往采用对整体的分布取标准正态的方法。并且根据 "),a("a",v,[_,s(e)]),n(" 当在大量随机变量上重复很多次实验时，它们的分布总和将非常接近正态分布，所以以概率统计分布为核心的研究也大都聚焦于正态分布。")]),w,a("p",null,[n("​ 通过 "),a("a",y,[n("IBM. SPSS"),s(e)]),n(" 工具建立数据分析模型，绘制 Q-Q 图 ，确定数据分布的正态性，除了 Q-Q 图还可以通过茎叶图、直方图、箱式图等来进行判断。")]),j,a("p",null,[n("​ 如果要建立对应的正态分布方程，需要求解两个关键参数，一个是数学期望，也就是平均数，另一个就是方差。通过这两个关键参数来确定正态分布公式，这也是由正态分布的特征来决定的，描述一个正态分布通常会取 "),a("a",z,[n("随机变量"),s(e)]),n(" X 服从一个 "),a("a",x,[n("数学期望 "),s(e)]),n("为 μ 、"),a("a",C,[n("方差"),s(e)]),n("为 σ^2 的正态分布，记为 N(μ，σ^2）。通过定义可得，一旦均值和标准差确定，正态分布也就确定。")]),E,a("p",null,[n("​ 异常值检测也是 "),a("a",P,[n("机器学习 "),s(e)]),n("中重要的应用之一，采用了非监督学习的方式，检测要测试的样本是否为模型中的离群点。具体的建模和分析方法这里推荐吴恩达老师机器学习第九周的课程 "),a("a",A,[n("异常检测（Anomaly Detection）"),s(e)]),n("，里面比较详细介绍了通过高斯分布和多元高斯分布建立模型，推导算法并构建异常检测体系的过程。")]),L,a("p",null,[a("a",Q,[n("浅析 path 常用工具函数源码"),s(e)])]),a("p",null,[a("a",B,[n("Web Components-LitElement实践"),s(e)])]),a("p",null,[a("a",D,[n("模块联邦浅析"),s(e)])]),a("p",null,[a("a",q,[n("性能优化——图片压缩、加载和格式选择"),s(e)])]),S,I,W,a("p",null,[a("strong",null,[n("开源地址 "),a("a",Z,[n("www.zoo.team/openweekly/"),s(e)])]),n(" (小报官网首页有微信交流群)")]),F,a("p",null,[a("strong",null,[n("开源地址 "),a("a",N,[n("https://github.com/zcy-inc/skuPathFinder-back/"),s(e)])])]),T,U,V,M])}const K=t(r,[["render",R],["__file","数据统计在性能检测中的应用.html.vue"]]);export{K as default};
